(function(aM){function aB(a,c){c=c==="x"?aF.width():aF.height();return typeof a==="string"?Math.round(a.match(/%/)?c/100*parseInt(a,10):parseInt(a,10)):a}function af(a){a=aM.isFunction(a)?a.call(aJ):a;return aN.photo||a.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function d(){for(var a in aN){if(aM.isFunction(aN[a])&&a.substring(0,2)!=="on"){aN[a]=aN[a].call(aJ)}}}function b(a){aJ=a;aN=aM(aJ).data(aC);d();var c=aN.rel||aJ.rel;if(c&&c!=="nofollow"){aK=aM(".cboxElement").filter(function(){return(aM(this).data(aC).rel||this.rel)===c});aI=aK.index(aJ);if(aI<0){aK=aK.add(aJ);aI=aK.length-1}}else{aK=aM(aJ);aI=0}if(!ao){an=ao=aE;ae=aJ;ae.blur();aM().bind("keydown.cbox_close",function(f){if(f.keyCode===27){f.preventDefault();aL.close()}}).bind("keydown.cbox_arrows",function(f){if(aK.length>1){if(f.keyCode===37){f.preventDefault();am.click()}else{if(f.keyCode===39){f.preventDefault();al.click()}}}});aN.overlayClose&&aA.css({cursor:"pointer"}).one("click",aL.close);aM.event.trigger(aq);aN.onOpen&&aN.onOpen.call(aJ);aA.css({opacity:aN.opacity}).show();aN.w=aB(aN.initialWidth,"x");aN.h=aB(aN.initialHeight,"y");aL.position(0);ad&&aF.bind("resize.cboxie6 scroll.cboxie6",function(){aA.css({width:aF.width(),height:aF.height(),top:aF.scrollTop(),left:aF.scrollLeft()})}).trigger("scroll.cboxie6")}ac.add(am).add(al).add(az).add(ak).hide();ab.html(aN.close).show();aL.slideshow();aL.load()}var aC="colorbox",av="hover",aE=true,aL,au=!aM.support.opacity,ad=au&&!window.XMLHttpRequest,aq="cbox_open",aj="cbox_load",M="cbox_complete",G="resize.cbox_resize",aA,aH,ay,aD,B,o,g,e,aK,aF,aG,ai,ah,ag,ak,ac,az,al,am,ab,at,ap,ax,aw,aJ,ae,aI,aN,ao,an,ar={transition:"elastic",speed:350,width:false,height:false,innerWidth:false,innerHeight:false,initialWidth:"400",initialHeight:"400",maxWidth:false,maxHeight:false,scalePhotos:aE,scrolling:aE,inline:false,html:false,iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:aE,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,overlayClose:aE,slideshow:false,slideshowAuto:aE,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false};aL=aM.fn.colorbox=function(a,f){var c=this;if(!c.length){if(c.selector===""){c=aM(c);a.open=aE}else{return this}}c.each(function(){var h=aM.extend({},aM(this).data(aC)?aM(this).data(aC):ar,a);aM(this).data(aC,h).addClass("cboxElement");if(f){aM(this).data(aC).onComplete=f}});a&&a.open&&b(c);return this};aL.init=function(){function a(c){return aM('<div id="cbox'+c+'"/>')}aF=aM(window);aH=aM('<div id="colorbox"/>');aA=a("Overlay").hide();ay=a("Wrapper");aD=a("Content").append(aG=a("LoadedContent").css({width:0,height:0}),ah=a("LoadingOverlay"),ag=a("LoadingGraphic"),ak=a("Title"),ac=a("Current"),az=a("Slideshow"),al=a("Next"),am=a("Previous"),ab=a("Close"));ay.append(aM("<div/>").append(a("TopLeft"),B=a("TopCenter"),a("TopRight")),aM("<div/>").append(o=a("MiddleLeft"),aD,g=a("MiddleRight")),aM("<div/>").append(a("BottomLeft"),e=a("BottomCenter"),a("BottomRight"))).children().children().css({"float":"left"});ai=aM("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>");aM("body").prepend(aA,aH.append(ay,ai));if(au){aH.addClass("cboxIE");ad&&aA.css("position","absolute")}aD.children().addClass(av).mouseover(function(){aM(this).addClass(av)}).mouseout(function(){aM(this).removeClass(av)});at=B.height()+e.height()+aD.outerHeight(aE)-aD.height();ap=o.width()+g.width()+aD.outerWidth(aE)-aD.width();ax=aG.outerHeight(aE);aw=aG.outerWidth(aE);aH.css({"padding-bottom":at,"padding-right":ap}).hide();al.click(aL.next);am.click(aL.prev);ab.click(aL.close);aD.children().removeClass(av);aM(".cboxElement").live("click",function(c){if(c.button!==0&&typeof c.button!=="undefined"){return aE}else{b(this);return false}})};aL.position=function(a,i){function f(j){B[0].style.width=e[0].style.width=aD[0].style.width=j.style.width;ag[0].style.height=ah[0].style.height=aD[0].style.height=o[0].style.height=g[0].style.height=j.style.height}var c=aF.height();c=Math.max(c-aN.h-ax-at,0)/2+aF.scrollTop();var h=Math.max(document.documentElement.clientWidth-aN.w-aw-ap,0)/2+aF.scrollLeft();a=aH.width()===aN.w+aw&&aH.height()===aN.h+ax?0:a;ay[0].style.width=ay[0].style.height="9999px";aH.dequeue().animate({width:aN.w+aw,height:aN.h+ax,top:c,left:h},{duration:a,complete:function(){f(this);an=false;ay[0].style.width=aN.w+aw+ap+"px";ay[0].style.height=aN.h+ax+at+"px";i&&i()},step:function(){f(this)}})};aL.resize=function(a){function i(){aN.w=aN.w||aG.width();aN.w=aN.mw&&aN.mw<aN.w?aN.mw:aN.w;return aN.w}function f(){aN.h=aN.h||aG.height();aN.h=aN.mh&&aN.mh<aN.h?aN.mh:aN.h;return aN.h}function c(l){aL.position(l,function(){if(ao){if(au){k&&aG.fadeIn(100);aH[0].style.removeAttribute("filter")}if(aN.iframe){aG.append("<iframe id='cboxIframe'"+(aN.scrolling?" ":"scrolling='no'")+" name='iframe_"+(new Date).getTime()+"' frameborder=0 src='"+(aN.href||aJ.href)+"' "+(au?"allowtransparency='true'":"")+" />")}aG.show();ak.html(aN.title||aJ.title);ak.show();if(aK.length>1){ac.html(aN.current.replace(/\{current\}/,aI+1).replace(/\{total\}/,aK.length)).show();al.html(aN.next).show();am.html(aN.previous).show();aN.slideshow&&az.show()}ah.hide();ag.hide();aM.event.trigger(M);aN.onComplete&&aN.onComplete.call(aJ);aN.transition==="fade"&&aH.fadeTo(j,1,function(){au&&aH[0].style.removeAttribute("filter")});aF.bind(G,function(){aL.position(0)})}})}if(ao){var h,k,j=aN.transition==="none"?0:aN.speed;aF.unbind(G);if(a){aG.remove();aG=aM('<div id="cboxLoadedContent"/>').html(a);aG.hide().appendTo(ai).css({width:i(),overflow:aN.scrolling?"auto":"hidden"}).css({height:f()}).prependTo(aD);aM("#cboxPhoto").css({cssFloat:"none"});ad&&aM("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("cbox_cleanup",function(){this.style.visibility="inherit"});aN.transition==="fade"&&aH.fadeTo(j,0,function(){c(0)})||c(j);if(aN.preloading&&aK.length>1){a=aI>0?aK[aI-1]:aK[aK.length-1];h=aI<aK.length-1?aK[aI+1]:aK[0];h=aM(h).data(aC).href||h.href;a=aM(a).data(aC).href||a.href;af(h)&&aM("<img />").attr("src",h);af(a)&&aM("<img />").attr("src",a)}}else{setTimeout(function(){var l=aG.wrapInner("<div style='overflow:auto'></div>").children();aN.h=l.height();aG.css({height:aN.h});l.replaceWith(l.children());aL.position(j)},1)}}};aL.load=function(){var a,h,f,c=aL.resize;an=aE;aJ=aK[aI];aN=aM(aJ).data(aC);d();aM.event.trigger(aj);aN.onLoad&&aN.onLoad.call(aJ);aN.h=aN.height?aB(aN.height,"y")-ax-at:aN.innerHeight?aB(aN.innerHeight,"y"):false;aN.w=aN.width?aB(aN.width,"x")-aw-ap:aN.innerWidth?aB(aN.innerWidth,"x"):false;aN.mw=aN.w;aN.mh=aN.h;if(aN.maxWidth){aN.mw=aB(aN.maxWidth,"x")-aw-ap;aN.mw=aN.w&&aN.w<aN.mw?aN.w:aN.mw}if(aN.maxHeight){aN.mh=aB(aN.maxHeight,"y")-ax-at;aN.mh=aN.h&&aN.h<aN.mh?aN.h:aN.mh}a=aN.href||aM(aJ).attr("href");ah.show();ag.show();if(aN.inline){aM('<div id="cboxInlineTemp" />').hide().insertBefore(aM(a)[0]).bind(aj+" cbox_cleanup",function(){aM(this).replaceWith(aG.children())});c(aM(a))}else{if(aN.iframe){c(" ")}else{if(aN.html){c(aN.html)}else{if(af(a)){h=new Image;h.onload=function(){var i;h.onload=null;h.id="cboxPhoto";aM(h).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(aN.scalePhotos){f=function(){h.height-=h.height*i;h.width-=h.width*i};if(aN.mw&&h.width>aN.mw){i=(h.width-aN.mw)/h.width;f()}if(aN.mh&&h.height>aN.mh){i=(h.height-aN.mh)/h.height;f()}}if(aN.h){h.style.marginTop=Math.max(aN.h-h.height,0)/2+"px"}c(h);aK.length>1&&aM(h).css({cursor:"pointer"}).click(aL.next);if(au){h.style.msInterpolationMode="bicubic"}};h.src=a}else{aM("<div />").appendTo(ai).load(a,function(i,j){j==="success"?c(this):c(aM("<p>Request unsuccessful.</p>"))})}}}}};aL.next=function(){if(!an){aI=aI<aK.length-1?aI+1:0;aL.load()}};aL.prev=function(){if(!an){aI=aI>0?aI-1:aK.length-1;aL.load()}};aL.slideshow=function(){function a(){az.text(aN.slideshowStop).bind(M,function(){f=setTimeout(aL.next,aN.slideshowSpeed)}).bind(aj,function(){clearTimeout(f)}).one("click",function(){h();aM(this).removeClass(av)});aH.removeClass(c+"off").addClass(c+"on")}var h,f,c="cboxSlideshow_";az.bind("cbox_closed",function(){az.unbind();clearTimeout(f);aH.removeClass(c+"off "+c+"on")});h=function(){clearTimeout(f);az.text(aN.slideshowStart).unbind(M+" "+aj).one("click",function(){a();f=setTimeout(aL.next,aN.slideshowSpeed);aM(this).removeClass(av)});aH.removeClass(c+"on").addClass(c+"off")};if(aN.slideshow&&aK.length>1){aN.slideshowAuto?a():h()}};aL.close=function(){aM.event.trigger("cbox_cleanup");aN.onCleanup&&aN.onCleanup.call(aJ);ao=false;aM().unbind("keydown.cbox_close keydown.cbox_arrows");aF.unbind(G+" resize.cboxie6 scroll.cboxie6");aA.css({cursor:"auto"}).fadeOut("fast");aH.stop(aE,false).fadeOut("fast",function(){aG.remove();aH.css({opacity:1});try{ae.focus()}catch(a){}aM.event.trigger("cbox_closed");aN.onClosed&&aN.onClosed.call(aJ)})};aL.element=function(){return aM(aJ)};aL.settings=ar;aM(aL.init)})(jQuery);