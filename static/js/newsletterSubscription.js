if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}function newsletterSubscription(d,r,f,s){var m=/&$/,u="/pws/subscriptionproxy/fcp-content",z,i,w=true,j=jQuery(d),t=jQuery(d).attr("id");t=t.toLowerCase();if(typeof(r)==="undefined"){r=500}if(typeof(f)==="undefined"){f=false}if(typeof(s)==="undefined"){s=false}if(t==="footer_enews_form"){z=newsletterQuickSubscriptionMap}else{z=newsletterSubscriptionMap}function A(){j.find("[name^='bespoke_']").attr("disabled","disabled")}function x(B){var C=jQuery(B).find("main")}function c(D,B,C){}function n(){if(f&&w){A()}j.submit();if(r>0){window.clearTimeout(i)}}function k(C){var B=u+"?"+C;$.ajax({url:B,success:x,error:c})}function y(D){var C=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;var B=new RegExp(C);return B.test(D)}function v(D){var C=/^[\s\d]+$/;var B=new RegExp(C);return B.test(D)}function h(E,C,B){var D=true;return D}function b(E,C,B){var D=true;switch(E){case"namedattr_salutation":case"k_user_firstname":case"k_user_lastname":if(B===true||C.length<2){D=false}break;default:break}return D}function p(E,C,B){var D=true;return D}function q(E,C,B){var D=true;return D}function l(E,C,B){var D=true;switch(E){case"namedattr_salutation":case"k_user_firstname":case"k_user_lastname":if(B===true||C.length<2){D=false}break;case"namedattr_MobilePhone":if(!B){D=v(C)}break;case"namedattr_Telephone":if(!B){D=v(C)}break;default:break}return D}function o(E,C,B){var D=true;switch(E){case"gid":if(B||C.length<4){D=false}break;case"pemail":if(!B||C.length>3){D=y(C)}else{D=false}break;default:break}return D}function e(E,C,B){var D=true;D=o(E,C,B);if(D){switch(t){case"footer_enews_form":D=h(E,C,B);break;case"prospectregistrationform":D=b(E,C,B);break;case"register_form":D=l(E,C,B);break;case"update_customer_marketing":D=p(E,C,B);break;case"confirmation-marketing-form":D=q(E,C,B);break;default:break}}return D}function g(D){var C=D,B=[];if(D.indexOf("CA_")===0){B=D.split("_");C=B[1]}return C}function a(B){var E="",G=0,D=true,C=false,F="";$.each(B.serializeArray(),function(H,I){F=g(I.name);G=z.aSourceField.indexOf(F);C=false;if(G>-1){if(I.value!=null&&I.value!=""&&I.value!="null"){E+=z.aDestField[G]+"="+I.value+"&"}else{E+=z.aDestField[G]+"=null&";C=true}D=e(z.aDestField[G],I.value,C);if(!D){return D}}});if(D){k(E.replace(m,""))}}w=a(j);if(r>0){i=window.setTimeout(n,r)}};