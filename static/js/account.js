function setupFunctions(){$("#add_new_address_btn").click(function(){$("div#account_add_address").slideDown("fast");$(this).fadeOut()});$(".account_detail_value .button").click(function(){var b=$(this).parents("form").find("div.hidden:first");var a=$(this).parents(".account_detail_value");if(b.css("display")=="none"){b.slideDown("slow",function(){b.css({display:"block",overflow:"hidden"})});a.find(".detail_edit").css({display:"none"});a.find(".detail_close").css({display:"block"})}else{b.slideUp("slow");a.find(".detail_close").css({display:"none"});a.find(".detail_edit").css({display:"block"})}})}function setupAddressAndPostcode(){if($("#checkout_delivery_details").length>0&&$("div.first_customer_address").length<1){$(window).scrollTo($("fieldset.postcode_lookup"),800)}$("#no_postcode").click(function(){$("#delivery_second_section").removeClass("jshide").show();$(this).parent().hide()});$("#search_postcode_button").click(function(){$(".validate").addClass("ignore");$(this).parents("form").find("input[name='search']").val("true").end().find("input[name='isSearchPostcode']").val("true").end().submit()});$(".postcodeAddressSelect").change(function(){$(".validate").addClass("ignore");$(this).parents("form").find("input[name='search']").val("true").end().find("input[name='searchAddressId']").val($("#postcode_address_id").attr("value")).end().submit()});var a=$("#search_postcode");a.focus(function(){$(document).keydown(function(b){if(b.keyCode==13){$("#search_postcode_button").click()}})});$("#delivery_second_section input").each(function(){var b=0;if($(this).length){b=1}if(b==1){$("#no_postcode_element").hide();$("#delivery_second_section").removeClass("jshide").show()}})}function ecircleMarketing(){var a=$("#hidden-marketing-list");$(".subscribed").click(function(){if(a.attr("checked")){a.removeAttr("checked");$(this).addClass("checked")}else{a.attr("checked","checked");$(this).removeClass("checked")}});$(".unsubscribed").click(function(){if(a.attr("checked")){a.removeAttr("checked");$(this).addClass("checked")}else{a.attr("checked","checked");$(this).removeClass("checked")}})}$(document).ready(function(){setupFunctions();setupAddressAndPostcode();$("form.validate").each(function(){if($("body").is(".ly_manageaddresses")){if($(this).is("#createAddressForm")){$(this).frescaValidate({popup_content:"popup_error_content"})}}else{if($("body").is(".ly_accountemaildetails")){$(this).frescaValidate({popup_content:"popup_error_content"})}else{if($("body").is(".ly_accountpassworddetails")){$(this).frescaValidate({popup_content:"popup_error_content"})}}}});ecircleMarketing()});